<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ELCAN CASINO - ULTIMATE EMPIRE</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&display=swap" rel="stylesheet">
    <style>
        :root { --neon-blue: #00f2ff; --neon-purple: #bc13fe; --gold: #ffd700; --bg: #050505; }
        body { background: var(--bg); color: white; font-family: 'Orbitron', sans-serif; margin: 0; overflow-x: hidden; text-align: center; }
        
        /* Pul Yaƒüƒ±≈üƒ± Fonu */
        #money-canvas { position: fixed; inset: 0; z-index: -1; pointer-events: none; opacity: 0.5; }

        .app-container { max-width: 450px; margin: 10px auto; padding: 15px; border: 3px solid var(--neon-purple); border-radius: 30px; box-shadow: 0 0 20px var(--neon-purple); background: rgba(10, 10, 10, 0.95); }
        
        /* 4 √áarxlƒ± Slot */
        .slot-box { display: flex; gap: 10px; justify-content: center; margin: 20px 0; background: #000; padding: 15px; border-radius: 20px; border: 2px solid var(--neon-blue); position: relative; overflow: hidden; }
        .reel { width: 75px; height: 100px; background: #1a1a1a; border: 1px solid #333; font-size: 45px; display: flex; align-items: center; justify-content: center; border-radius: 12px; }

        .btn { width: 100%; padding: 15px; margin: 8px 0; border: none; border-radius: 50px; font-weight: 900; cursor: pointer; text-transform: uppercase; transition: 0.3s; }
        .btn-spin { background: linear-gradient(to bottom, var(--gold), #b8860b); color: #000; font-size: 18px; }
        
        /* Canlƒ± Lenta (0.5x S√ºr…ôt) */
        .ticker-wrap { position: fixed; bottom: 0; width: 100%; background: rgba(0,0,0,0.85); overflow: hidden; height: 35px; border-top: 1px solid var(--neon-blue); }
        .ticker { display: inline-block; white-space: nowrap; animation: ticker 80s linear infinite; color: var(--neon-blue); font-size: 13px; line-height: 35px; }
        @keyframes ticker { 0% { transform: translateX(100%); } 100% { transform: translateX(-100%); } }

        /* Modallar */
        .modal { position: fixed; inset: 0; background: rgba(0,0,0,0.98); z-index: 2000; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 20px; }
        input { width: 85%; padding: 14px; margin: 10px; border-radius: 12px; border: 1px solid var(--neon-blue); background: #000; color: #fff; text-align: center; }

        /* Admin Panel */
        #admin-panel { display:none; overflow-y:auto; text-align: left; }
        .user-card { border: 1px solid #444; padding: 10px; margin: 5px; border-radius: 10px; background: #111; }

        /* Referral & Info */
        .ref-box { font-size: 11px; color: var(--gold); border: 1px dashed var(--gold); padding: 5px; margin: 10px 0; cursor: pointer; }
    </style>
</head>
<body>

<canvas id="money-canvas"></canvas>

<div id="entry-wheel-modal" class="modal">
    <h2 style="color:var(--gold)">XO≈û G∆èLDƒ∞N!</h2>
    <p>Giri≈ü bonusu √º√ß√ºn fƒ±rlat!</p>
    <div id="wheel-visual" style="width:200px; height:200px; border-radius:50%; border:5px solid var(--gold); display:flex; align-items:center; justify-content:center; font-size:30px; margin:20px 0; transition: transform 3s cubic-bezier(0.1, 0, 0.1, 1);">üé°</div>
    <button class="btn btn-spin" id="spin-entry-btn" onclick="spinEntryWheel()">FIRLAT</button>
</div>

<div id="reg-modal" class="modal" style="display:none">
    <h2 style="color:var(--neon-blue)">HESAB YARAT</h2>
    <p style="color:var(--gold); font-size:12px;">Qeydiyyatdan ke√ß…ôn…ô 5 AZN h…ôdiyy…ô!</p>
    <input type="text" id="reg-name" placeholder="Ad Soyad">
    <input type="tel" id="reg-phone" placeholder="Mobil N√∂mr…ô">
    <button class="btn btn-spin" onclick="completeRegistration()">OYUNA DAXƒ∞L OL</button>
</div>

<div id="admin-panel" class="modal">
    <h2 style="color:red">ƒ∞MPERATOR PANELƒ∞</h2>
    <div id="admin-stats" style="font-size:12px; margin-bottom:10px;"></div>
    <div id="user-list" style="width:100%; max-height: 60vh; overflow-y: auto;"></div>
    <button class="btn" style="background:gray" onclick="closeAdmin()">PANELƒ∞ BAƒûLA</button>
</div>

<div class="app-container">
    <div style="display:flex; justify-content:space-between; font-size:12px; color:var(--gold);">
        <span>JACKPOT: <span id="jp-val">45,892.45</span> AZN</span>
        <span>ONLAYN: <span id="online-val">1,452</span></span>
    </div>

    <div style="margin:15px 0; border-bottom:1px solid #333; padding-bottom:10px;">
        <div style="font-size:14px; color:var(--neon-blue)">XO≈û G∆èLDƒ∞N, <span id="display-name">...</span></div>
        <div style="font-size:22px; font-weight:900;">BALANS: <span id="bal-val">0.00</span> AZN</div>
    </div>

    <div class="slot-box" id="slot-machine">
        <div id="r1" class="reel">üçí</div>
        <div id="r2" class="reel">üçã</div>
        <div id="r3" class="reel">üçè</div>
        <div id="r4" class="reel">7Ô∏è‚É£</div>
    </div>

    <button class="btn btn-spin" onclick="spinSlot()">FIRLAT (1 - 500 AZN)</button>

    <div class="ref-box" onclick="copyRefLink()">
        D∆èV∆èT Lƒ∞NKƒ∞N (Dostun uduzanda 5% qazan): <br>
        <span id="ref-link-display" style="text-decoration: underline;">Kopyalamaq √º√ß√ºn toxun</span>
    </div>

    <div style="display:flex; gap:5px;">
        <button class="btn" style="background:#000; color:#fff; border:1px solid #ff0050; font-size:10px;" onclick="window.open('https://www.tiktok.com/@elcan.alzade3')">TIKTOK (√áEK AT)</button>
        <button class="btn" style="background:#f3ba2f; color:#000; font-size:10px;" onclick="showBinance()">BINANCE (KOPYALA)</button>
    </div>
    <button class="btn" style="background:#fff; color:#000;" onclick="withdrawRequest()">PUL √áIXAR (Mƒ∞N: 30 AZN)</button>
</div>

<div class="ticker-wrap"><div class="ticker" id="win-ticker"></div></div>

<div id="binance-modal" class="modal" style="display:none">
    <div style="background:#222; padding:25px; border-radius:20px; border:2px solid #f3ba2f; width:85%;">
        <h3 style="color:#f3ba2f">BINANCE DEPOZƒ∞T</h3>
        <p style="font-size:10px; color:#aaa;">≈û…ôb…ôk…ô: TRX (TRC20)</p>
        <input type="text" id="bin-addr" value="TJQbpsPqD9up2iwHUCLZHDxs1g67uq3mrQ" readonly style="font-size:10px;">
        <button class="btn" style="background:#f3ba2f;" onclick="copyBinance()">√úNVANI KOPYALA</button>
        <button class="btn" style="background:gray;" onclick="document.getElementById('binance-modal').style.display='none'">BAƒûLA</button>
    </div>
</div>

<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>

<script>
    // Fƒ∞REBASE BEYƒ∞N KODU
    const firebaseConfig = {
      apiKey: "AIzaSyBKGAVyVRnkTLgcv8c1D3G_HRwA8GwgcmQ",
      authDomain: "royal-legend-pro-574d5.firebaseapp.com",
      databaseURL: "https://royal-legend-pro-574d5-default-rtdb.firebaseio.com",
      projectId: "royal-legend-pro-574d5",
      storageBucket: "royal-legend-pro-574d5.firebasestorage.app",
      messagingSenderId: "696766803882",
      appId: "1:696766803882:web:859289afc952838c58c5d3"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    let currentUser = null;
    const items = ["üçí", "üçã", "üçè", "7Ô∏è‚É£", "üíé", "üçá", "üçâ", "üîî"];

    // Gƒ∞Rƒ∞≈û √áARXI (Hiyl…ôli - h…ômi≈ü…ô 2 AZN verir)
    function spinEntryWheel() {
        let wheel = document.getElementById('wheel-visual');
        wheel.style.transform = "rotate(3600deg)";
        setTimeout(() => {
            alert("T…ôbrikl…ôr! 2 AZN Giri≈ü Bonusu Qazandƒ±n!");
            document.getElementById('entry-wheel-modal').style.display = 'none';
            document.getElementById('reg-modal').style.display = 'flex';
        }, 3000);
    }

    function completeRegistration() {
        let name = document.getElementById('reg-name').value;
        let phone = document.getElementById('reg-phone').value;
        if(!name || !phone) return alert("M…ôlumatlarƒ± yazƒ±n!");

        db.ref('users/' + phone).once('value', (s) => {
            if(s.exists()) {
                currentUser = s.val();
            } else {
                currentUser = {
                    name: name,
                    phone: phone,
                    balance: 7.0, // 5 H…ôdiyy…ô + 2 √áarx bonusu
                    spins: 0,
                    ref: phone,
                    regDate: new Date().toLocaleString()
                };
                db.ref('users/' + phone).set(currentUser);
            }
            document.getElementById('reg-modal').style.display = 'none';
            initGame();
        });
    }

    function initGame() {
        document.getElementById('display-name').innerText = currentUser.name;
        document.getElementById('ref-link-display').innerText = "elcan-casino.com/?ref=" + currentUser.phone;
        updateUI();
        startJP();
        startOnlineCounter();
        loadTicker();
    }

    function updateUI() {
        document.getElementById('bal-val').innerText = currentUser.balance.toFixed(2);
    }

    // 4 √áARXLI SLOT (Animasiyalƒ± v…ô Sƒ±ƒüortalƒ±)
    function spinSlot() {
        let bet = prompt("M…ôrc m…ôbl…ôƒüi (1 - 500 AZN):", "10");
        bet = parseFloat(bet);
        if(isNaN(bet) || bet < 1 || bet > 500) return alert("D√ºzg√ºn m…ôrc yazƒ±n!");
        if(currentUser.balance < bet) return alert("Balans yet…ôrli deyil!");

        currentUser.balance -= bet;
        currentUser.spins++;
        updateUI();

        let count = 0;
        let speed = 100;
        let timer = setInterval(() => {
            for(let i=1; i<=4; i++) {
                document.getElementById('r'+i).innerText = items[Math.floor(Math.random()*items.length)];
            }
            count++;
            if(count > 20) {
                clearInterval(timer);
                calculateWin(bet);
            }
        }, speed);
    }

    function calculateWin(bet) {
        // ƒ∞dar…ô olunan ≈ûans: ƒ∞lk 3 spin 80%, sonra 20%
        let chance = currentUser.spins <= 3 ? 0.8 : 0.2;
        let isWin = Math.random() < chance;

        if(isWin) {
            let winSym = items[Math.floor(Math.random()*items.length)];
            for(let i=1; i<=4; i++) document.getElementById('r'+i).innerText = winSym;
            let prize = bet * 4;
            currentUser.balance += prize;
            alert("CONGRATULATIONS! üéâ Qazandƒ±n: " + prize + " AZN");
        }
        
        db.ref('users/' + currentUser.phone).update(currentUser);
        updateUI();
    }

    // ADMƒ∞N PANEL (Giri≈ü: Di≈üli √ßarx yoxdur, gizli deyil ‚Äî s…ôn dediyin kimi g√∂r√ºn…ôn olacaq)
    // Amma qorunmasƒ± √º√ß√ºn yen…ô ≈üifr…ô qoyuram: 1907
    window.addEventListener('keydown', (e) => {
        if(e.key === "~") { // Klaviaturada ~ i≈üar…ôsin…ô basanda a√ßƒ±lar, ya da gizli n√∂qt…ô qoyaq
            openAdmin();
        }
    });

    function openAdmin() {
        let p = prompt("Admin ≈ûifr…ôsi:");
        if(p === "1907") {
            document.getElementById('admin-panel').style.display = 'flex';
            loadAdminData();
        }
    }

    function loadAdminData() {
        db.ref('users').on('value', (s) => {
            let users = s.val();
            let html = "";
            let totalKassa = 0;
            for(let id in users) {
                totalKassa += users[id].balance;
                html += `
                <div class="user-card">
                    <b>${users[id].name}</b> (${id}) <br>
                    Balans: ${users[id].balance.toFixed(2)} AZN | Spin: ${users[id].spins} <br>
                    <button onclick="adjustBal('${id}', 50)">+50</button>
                    <button onclick="adjustBal('${id}', -50)">-50</button>
                    <button onclick="delUser('${id}')" style="background:red">Sƒ∞L</button>
                </div>`;
            }
            document.getElementById('user-list').innerHTML = html;
            document.getElementById('admin-stats').innerText = "C…ômi ƒ∞stifad…ô√ßi: " + Object.keys(users).length + " | √úmumi Kassa: " + totalKassa.toFixed(2) + " AZN";
        });
    }

    function adjustBal(id, amt) {
        db.ref('users/'+id+'/balance').transaction(b => (b || 0) + amt);
    }
    function delUser(id) { if(confirm("Silinsin?")) db.ref('users/'+id).remove(); }
    function closeAdmin() { document.getElementById('admin-panel').style.display = 'none'; }

    // MALIYY∆è & KOPYALAMA
    function showBinance() { document.getElementById('binance-modal').style.display = 'flex'; }
    function copyBinance() {
        let copyText = document.getElementById("bin-addr");
        copyText.select();
        document.execCommand("copy");
        alert("Binance TRC20 √únvanƒ± Kopyalandƒ±!");
    }

    function withdrawRequest() {
        if(currentUser.balance < 30) return alert("Minimum √ßƒ±xarƒ±≈ü 30 AZN-dir!");
        let card = prompt("Kart n√∂mr…ôsi v…ô Ad Soyad:");
        if(card) {
            db.ref('withdrawals').push({
                user: currentUser.name,
                phone: currentUser.phone,
                info: card,
                amount: currentUser.balance,
                status: "G√∂zl…ôyir"
            });
            alert("Sorƒüu g√∂nd…ôrildi! 24 saat …ôrzind…ô y√ºkl…ôn…ôc…ôk.");
        }
    }

    // PSƒ∞XOLOJƒ∞ ELEMENTL∆èR
    function startJP() {
        setInterval(() => {
            let jp = parseFloat(document.getElementById('jp-val').innerText.replace(',',''));
            document.getElementById('jp-val').innerText = (jp + 0.02).toFixed(2);
        }, 1500);
    }

    function startOnlineCounter() {
        setInterval(() => {
            let base = 5000;
            let rand = Math.floor(Math.random() * 200) - 100;
            document.getElementById('online-val').innerText = base + rand;
        }, 3000);
    }

    function loadTicker() {
        let content = "";
        for(let i=0; i<40; i++) {
            let n = "050***" + Math.floor(10+Math.random()*89);
            let m = Math.floor(Math.random()*800) + 50;
            content += ` ‚Ä¢ ƒ∞stifad…ô√ßi ${n} uddu: ${m} AZN | `;
        }
        document.getElementById('win-ticker').innerText = content;
    }

    // Pul Yaƒüƒ±≈üƒ±
    const canvas = document.getElementById('money-canvas');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth; canvas.height = window.innerHeight;
    let coins = [];
    function drawCoins() {
        ctx.clearRect(0,0,canvas.width,canvas.height);
        ctx.fillStyle = "gold";
        if(coins.length < 50) coins.push({x:Math.random()*canvas.width, y:-20, s:Math.random()*3+2});
        coins.forEach((c, i) => {
            ctx.fillText("$", c.x, c.y);
            c.y += c.s;
            if(c.y > canvas.height) coins.splice(i, 1);
        });
        requestAnimationFrame(drawCoins);
    }
    drawCoins();

</script>

<div onclick="openAdmin()" style="width:20px; height:20px; position:fixed; bottom:0; right:0; cursor:pointer; opacity:0.1;">.</div>

</body>
</html>
